{"remainingRequest":"D:\\My Project\\web-19feb\\node_modules\\babel-loader\\lib\\index.js!D:\\My Project\\web-19feb\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\My Project\\web-19feb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\My Project\\web-19feb\\src\\views\\AdminUser.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\My Project\\web-19feb\\src\\views\\AdminUser.vue","mtime":1539578851796},{"path":"D:\\My Project\\web-19feb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1538498346230},{"path":"D:\\My Project\\web-19feb\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\My Project\\web-19feb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1538498346230},{"path":"D:\\My Project\\web-19feb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { Modal } from \"@/components\"; // import Loading from \"../layout/Loading.vue\";\n\nimport axios from \"axios\";\nimport swal from \"sweetalert2\";\nexport default {\n  components: {\n    Modal: Modal\n  },\n  bodyClass: \"profile-page\",\n  data: function data() {\n    return {\n      loading: false,\n      loadingEdit: false,\n      loadingReset: false,\n      loadingPermisson: false,\n      show: true,\n      listUser: [],\n      userSelect: {\n        id: \"\",\n        name: \"\",\n        point: 0,\n        role: \"\",\n        urlImg: \"\",\n        usr: \"\"\n      },\n      pwdUpdate: {\n        uid: \"\",\n        pwd: \"\",\n        repwd: \"\"\n      },\n      permissonUpdate: {\n        uid: \"\",\n        listPage: []\n      },\n      cloudinary: {\n        uploadPreset: \"f4w6spcm\",\n        apiKey: \"551749158563396\",\n        cloudName: \"dqibysfxu\",\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\",\n          Authorization: \"brearer \" + localStorage.token\n        }\n      },\n      imageUrl: \"\",\n      listPage: [],\n      dialogEdit: false,\n      dialogReset: false,\n      dialogPermisson: false,\n      formLabelWidth: \"120px;\"\n    };\n  },\n  props: {\n    header: {\n      type: String,\n      default: require(\"@/assets/img/city-profile.jpg\")\n    },\n    img: {\n      type: String,\n      default: require(\"@/assets/img/faces/christian.jpg\")\n    }\n  },\n  computed: {\n    clUrl: function clUrl() {\n      return \"https://api.cloudinary.com/v1_1/\".concat(this.cloudinary.cloudName, \"/upload\");\n    },\n    headerStyle: function headerStyle() {\n      return {\n        backgroundImage: \"url(\".concat(this.header, \")\")\n      };\n    }\n  },\n  methods: {\n    getUser: function getUser() {\n      var _this = this;\n\n      this.loading = true;\n      var http = axios.create({\n        baseURL: this.baseApi + \"api/adminuser\",\n        headers: {\n          \"content-type\": \"application/x-www-form-urlencoded\",\n          Authorization: \"brearer \" + localStorage.token\n        }\n      });\n      http.post().then(function (res) {\n        _this.listUser = res.data.data;\n        console.log(\"sucess\", res.data);\n        _this.loading = false;\n      }).catch(function (err) {\n        console.log(\"err\", err);\n        _this.loading = false;\n      });\n    },\n    getFile: function getFile() {\n      document.getElementById(\"pic\").click();\n    },\n    handleEdit: function handleEdit(index, row) {\n      this.userSelect = row;\n      this.dialogEdit = true; // console.log(index,'=>',row);\n    },\n    handleReset: function handleReset(index, row) {\n      this.pwdUpdate = {\n        uid: row.id,\n        pwd: \"\",\n        repwd: \"\"\n      };\n      this.dialogReset = true;\n    },\n    handlePermisson: function handlePermisson(index, row) {\n      this.dialogPermisson = true;\n      this.listPage = [];\n      this.permissonUpdate.listPage = [];\n      this.getPermissons(row.id);\n    },\n    onSavedItem: function onSavedItem() {\n      var _this2 = this;\n\n      this.loadingEdit = true;\n      axios.post(this.baseApi + \"api/adminuser/edit\", this.userSelect, {\n        headers: {\n          \"content-type\": \"application/json\",\n          Authorization: \"brearer \" + localStorage.token\n        }\n      }).then(function (res) {\n        _this2.dialogEdit = false;\n\n        if (res.data.Result) {\n          swal({\n            title: \"Lưu thành công\",\n            type: \"success\",\n            showConfirmButton: false,\n            timer: 1000\n          }).then(function () {\n            _this2.loadingEdit = false;\n\n            _this2.getUser();\n          });\n        } else {\n          swal({\n            title: \"Lỗi \" + res.data.Code,\n            text: res.data.Msg,\n            type: \"error\",\n            showConfirmButton: false,\n            timer: 1000\n          }).then(function () {\n            _this2.loadingEdit = false;\n\n            _this2.getUser();\n          });\n        }\n      }).catch(function (err) {\n        console.log(\"err\", err);\n        _this2.loadingEdit = false;\n      });\n    },\n    onReset: function onReset() {\n      var _this3 = this;\n\n      this.loadingReset = true;\n      axios.post(this.baseApi + \"api/adminuser/resetPassword\", this.pwdUpdate, {\n        headers: {\n          \"content-type\": \"application/json\",\n          Authorization: \"brearer \" + localStorage.token\n        }\n      }).then(function (res) {\n        _this3.dialogReset = false;\n\n        if (res.data.Result) {\n          swal({\n            title: \"Đổi thành công\",\n            type: \"success\",\n            showConfirmButton: false,\n            timer: 1000\n          }).then(function () {\n            _this3.loadingReset = false;\n          });\n        } else {\n          swal({\n            title: \"Lỗi \" + res.data.Code,\n            text: res.data.Msg,\n            type: \"error\",\n            showConfirmButton: false,\n            timer: 1000\n          }).then(function () {\n            _this3.loadingReset = false;\n          });\n        }\n      }).catch(function (err) {\n        console.log(\"err\", err);\n        _this3.loadingReset = false;\n      });\n    },\n    onSetPermisson: function onSetPermisson() {\n      var _this4 = this;\n\n      this.loadingPermisson = true;\n      var listPage = [];\n      this.permissonUpdate.listPage.forEach(function (el) {\n        var d = _this4.listPage.filter(function (v) {\n          return v.screen == el;\n        })[0];\n\n        listPage.push(d);\n      });\n      var submitModel = {\n        userid: this.permissonUpdate.uid,\n        listPage: listPage\n      };\n      axios.post(this.baseApi + \"api/adminuser/setPermisson\", submitModel, {\n        headers: {\n          \"content-type\": \"application/json\",\n          Authorization: \"brearer \" + localStorage.token\n        }\n      }).then(function (res) {\n        _this4.dialogPermisson = false;\n\n        if (res.data.Result) {\n          swal({\n            title: \"Lưu thành công\",\n            type: \"success\",\n            showConfirmButton: false,\n            timer: 1000\n          });\n        } else {\n          swal({\n            title: \"Lỗi \" + res.data.Code,\n            text: res.data.Msg,\n            type: \"error\",\n            showConfirmButton: false,\n            timer: 1000\n          });\n        }\n\n        _this4.loadingPermisson = false;\n      }).catch(function (err) {\n        _this4.loadingPermisson = false;\n      });\n    },\n    getPermissons: function getPermissons(uid) {\n      var _this5 = this;\n\n      this.loadingPermisson = true; // var http = axios.create({\n      //   baseURL: this.baseApi + \"api/adminuser/getPage\",\n      //   headers: {\n      //     \"content-type\": \"application/x-www-form-urlencoded\",\n      //     Authorization: \"brearer \" + localStorage.token\n      //   }\n      // });\n\n      axios.post(this.baseApi + \"api/adminuser/getPage\", {\n        id: uid\n      }, {\n        headers: {\n          \"content-type\": \"application/json\",\n          Authorization: \"brearer \" + localStorage.token\n        }\n      }).then(function (res) {\n        _this5.listPage = res.data.data;\n        _this5.permissonUpdate.uid = uid;\n        _this5.permissonUpdate.listPage = [];\n        res.data.data_user.forEach(function (el) {\n          _this5.permissonUpdate.listPage.push(el.screen);\n        });\n        _this5.loadingPermisson = false;\n      }).catch(function (err) {\n        console.log(\"err\", err);\n        _this5.loadingPermisson = false;\n      });\n    },\n    handleAvatarSuccess: function handleAvatarSuccess(res, file) {\n      console.log(res);\n      this.imageUrl = URL.createObjectURL(file.raw);\n    },\n    beforeAvatarUpload: function beforeAvatarUpload(file) {\n      var isJPG = file.type === \"image/jpeg\";\n      var isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isJPG) {\n        this.$message.error(\"Avatar picture must be JPG format!\");\n      }\n\n      if (!isLt2M) {\n        this.$message.error(\"Avatar picture size can not exceed 2MB!\");\n      }\n\n      return isJPG && isLt2M;\n    },\n    upload: function upload(file) {\n      var _this6 = this;\n\n      this.loadingEdit = true;\n      var formData = new FormData();\n      formData.append(\"file\", file[0]);\n      formData.append(\"upload_preset\", this.cloudinary.uploadPreset);\n      formData.append(\"tags\", \"gs-vue,gs-vue-uploaded\");\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = formData.entries()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var pair = _step.value;\n          console.log(pair[0] + \", \" + pair[1]);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      axios.post(this.clUrl, formData).then(function (res) {\n        _this6.userSelect.urlImg = res.data.secure_url;\n        _this6.loadingEdit = false;\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.getUser();\n  }\n};",{"version":3,"sources":["AdminUser.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"wrapper\">\n    <!-- cập nhật thông tin -->\n    <el-dialog style=\"z-index: 100000;\" title=\"Thay đổi thông tin tài khoản\" :visible.sync=\"dialogEdit\">\n      <el-form :model=\"userSelect\" v-loading=\"loadingEdit\">\n        <el-row>\n            <el-col :span=\"6\">\n              &nbsp;\n            </el-col>\n             <el-col :span=\"12\" style=\"text-align:center;\">\n               <img v-if=\"userSelect.urlImg\" :src=\"userSelect.urlImg\" style=\"width: 200px;height: 200px;\" alt=\"Thumbnail Image\" class=\"img-raised rounded-circle\">\n               <br><br>\n               <input style=\"display:none\" id=\"pic\" name=\"pic\" type=\"file\" class=\"form-control\" v-on:change=\"upload($event.target.files)\" accept=\"image/*\" />\n               <el-button type=\"primary\" @click=\"getFile\">Chọn</el-button>\n            </el-col>\n             <el-col :span=\"6\">\n              &nbsp;\n            </el-col>\n        </el-row>\n        <el-form-item label=\"Tên\" :label-width=\"formLabelWidth\">\n          <el-input v-model=\"userSelect.name\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"Tag\" :label-width=\"formLabelWidth\">\n          <el-input v-model=\"userSelect.role\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button :loading=\"loadingEdit\" @click=\"dialogEdit = false\">Huỷ</el-button>\n        <el-button :loading=\"loadingEdit\" type=\"primary\" @click=\"onSavedItem\">Lưu</el-button>\n      </span>\n    </el-dialog>\n    <!-- reset mật khẩu -->\n    <el-dialog style=\"z-index: 100000;\" title=\"Cập nhật mật khẩu\" :visible.sync=\"dialogReset\">\n      <el-form :model=\"pwdUpdate\" v-loading=\"loadingReset\">\n        <el-input type=\"hidden\" v-model=\"pwdUpdate.uid\" autocomplete=\"off\"></el-input>\n        <el-form-item label=\"Pass mới\" :label-width=\"formLabelWidth\">\n          <el-input v-model=\"pwdUpdate.pwd\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"Nhập lại\" :label-width=\"formLabelWidth\">\n          <el-input v-model=\"pwdUpdate.repwd\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button :loading=\"loadingReset\" @click=\"dialogReset = false\">Huỷ</el-button>\n        <el-button :loading=\"loadingReset\" type=\"primary\" @click=\"onReset\">Lưu</el-button>\n      </span>\n    </el-dialog>\n    <!-- phân quyền  -->\n    <el-dialog style=\"z-index: 100000;\" title=\"Phân quyền\" :visible.sync=\"dialogPermisson\">\n      <el-form :model=\"permissonUpdate\" v-loading=\"loadingPermisson\">\n        <el-input type=\"hidden\" v-model=\"permissonUpdate.uid\" autocomplete=\"off\"></el-input>\n        <el-checkbox-group v-model=\"permissonUpdate.listPage\">\n          <el-row>\n            <el-col :span=\"12\" v-for=\"item in listPage\" :key=\"item.screen\">\n                <el-checkbox :label=\"item.screen\" name=\"type\">{{item.name}}</el-checkbox>\n            </el-col>\n           \n          </el-row>\n        </el-checkbox-group>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button :loading=\"loadingPermisson\" @click=\"dialogPermisson = false\">Huỷ</el-button>\n        <el-button :loading=\"loadingPermisson\" type=\"primary\" @click=\"onSetPermisson\">Lưu</el-button>\n      </span>\n    </el-dialog>\n    <parallax class=\"section page-header header-filter\" :style=\"headerStyle\"></parallax>\n    <div class=\"main main-raised\">\n      <div class=\"section profile-content\">\n        <div class=\"container\">\n          <div class=\"md-layout\">\n            <div class=\"md-layout-item md-size-50 mx-auto\">\n              <div class=\"profile\">\n                <div class=\"name\">\n                  <h3 class=\"title\">QUẢN LÝ USER</h3>\n                 </div>\n              </div>\n            </div>\n          </div>\n          <div class=\"profile-tabs\">\n              <el-table\n                :data=\"listUser\"\n                v-loading=\"loading\"\n                element-loading-text=\"Đang tải...\"\n                element-loading-spinner=\"el-icon-loading\"\n                style=\"width: 100%\">\n                <!-- <el-table-column\n                  fixed\n                  prop=\"id\"\n                  label=\"#\"\n                  width=\"150\">\n                </el-table-column> -->\n                <el-table-column\n                  prop=\"name\"\n                  label=\"Tên\"\n                  width=\"300\">\n                    <template slot-scope=\"scope\">\n                        <img :src=\"scope.row.urlImg\" style=\"width: 35px;height: 35px;\" alt=\"Thumbnail Image\" class=\"img-raised rounded-circle\">\n                        <span style=\"margin-left: 10px;\">{{scope.row.name}}</span>\n                    </template>\n                </el-table-column>\n                <el-table-column\n                  prop=\"point\"\n                  label=\"Điểm\"\n                  width=\"140\">\n                </el-table-column>\n                <el-table-column\n                  prop=\"role\"\n                  label=\"Quyền\"\n                  width=\"160\">\n                </el-table-column>\n                <el-table-column\n                  prop=\"usr\"\n                  label=\"Tên đăng nhập\"\n                  width=\"140\">\n                </el-table-column>\n                <el-table-column\n                  fixed=\"right\"\n                  label=\"Operations\"\n                  width=\"190\">\n                  <template slot-scope=\"scope\">                        \n                        <el-button \n                        size=\"mini\" \n                        type=\"primary\" \n                        icon=\"el-icon-edit\" \n                        @click=\"handleEdit(scope.$index, scope.row)\" circle></el-button>\n                        <el-button \n                        size=\"mini\" \n                        type=\"primary\" \n                        icon=\"el-icon-refresh\" \n                        @click=\"handleReset(scope.$index, scope.row)\" circle></el-button>\n                        <el-button \n                        size=\"mini\" \n                        type=\"primary\" \n                        icon=\"el-icon-more\"\n                        @click=\"handlePermisson(scope.$index, scope.row)\" circle></el-button> \n                    </template>\n                </el-table-column>\n              </el-table>\n              <br>\n              <br>\n              <br>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<style scoped>\n.title {\n  color: white;\n  text-decoration: underline;\n}\n.v-model {\n  z-index: 0 !important;\n}\n</style>\n\n<script>\nimport { Modal } from \"@/components\";\n// import Loading from \"../layout/Loading.vue\";\nimport axios from \"axios\";\nimport swal from \"sweetalert2\";\nexport default {\n  components: {\n    Modal\n  },\n  bodyClass: \"profile-page\",\n  data() {\n    return {\n      loading: false,\n      loadingEdit: false,\n      loadingReset: false,\n      loadingPermisson: false,\n      show: true,\n      listUser: [],\n      userSelect: {\n        id: \"\",\n        name: \"\",\n        point: 0,\n        role: \"\",\n        urlImg: \"\",\n        usr: \"\"\n      },\n      pwdUpdate: {\n        uid: \"\",\n        pwd: \"\",\n        repwd: \"\"\n      },\n      permissonUpdate: {\n        uid: \"\",\n        listPage: []\n      },\n      cloudinary: {\n        uploadPreset: \"f4w6spcm\",\n        apiKey: \"551749158563396\",\n        cloudName: \"dqibysfxu\",\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\",\n          Authorization: \"brearer \" + localStorage.token\n        }\n      },\n      imageUrl: \"\",\n      listPage: [],\n      dialogEdit: false,\n      dialogReset: false,\n      dialogPermisson: false,\n      formLabelWidth: \"120px;\"\n    };\n  },\n  props: {\n    header: {\n      type: String,\n      default: require(\"@/assets/img/city-profile.jpg\")\n    },\n    img: {\n      type: String,\n      default: require(\"@/assets/img/faces/christian.jpg\")\n    }\n  },\n  computed: {\n    clUrl: function() {\n      return `https://api.cloudinary.com/v1_1/${\n        this.cloudinary.cloudName\n      }/upload`;\n    },\n    headerStyle() {\n      return {\n        backgroundImage: `url(${this.header})`\n      };\n    }\n  },\n  methods: {\n    getUser() {\n      this.loading = true;\n      var http = axios.create({\n        baseURL: this.baseApi + \"api/adminuser\",\n        headers: {\n          \"content-type\": \"application/x-www-form-urlencoded\",\n          Authorization: \"brearer \" + localStorage.token\n        }\n      });\n      http\n        .post()\n        .then(res => {\n          this.listUser = res.data.data;\n          console.log(\"sucess\", res.data);\n          this.loading = false;\n        })\n        .catch(err => {\n          console.log(\"err\", err);\n          this.loading = false;\n        });\n    },\n    getFile() {\n      document.getElementById(\"pic\").click();\n    },\n    handleEdit(index, row) {\n      this.userSelect = row;\n      this.dialogEdit = true;\n      // console.log(index,'=>',row);\n    },\n    handleReset(index, row) {\n      this.pwdUpdate = {\n        uid: row.id,\n        pwd: \"\",\n        repwd: \"\"\n      };\n      this.dialogReset = true;\n    },\n    handlePermisson(index, row) {\n      this.dialogPermisson = true;\n      this.listPage = [];\n      this.permissonUpdate.listPage = [];\n      this.getPermissons(row.id);\n    },\n    onSavedItem() {\n      this.loadingEdit = true;\n      axios\n        .post(this.baseApi + \"api/adminuser/edit\", this.userSelect, {\n          headers: {\n            \"content-type\": \"application/json\",\n            Authorization: \"brearer \" + localStorage.token\n          }\n        })\n        .then(res => {\n          this.dialogEdit = false;\n          if (res.data.Result) {\n            swal({\n              title: \"Lưu thành công\",\n              type: \"success\",\n              showConfirmButton: false,\n              timer: 1000\n            }).then(() => {\n              this.loadingEdit = false;\n              this.getUser();\n            });\n          } else {\n            swal({\n              title: \"Lỗi \" + res.data.Code,\n              text: res.data.Msg,\n              type: \"error\",\n              showConfirmButton: false,\n              timer: 1000\n            }).then(() => {\n              this.loadingEdit = false;\n              this.getUser();\n            });\n          }\n        })\n        .catch(err => {\n          console.log(\"err\", err);\n          this.loadingEdit = false;\n        });\n    },\n    onReset() {\n      this.loadingReset = true;\n      axios\n        .post(this.baseApi + \"api/adminuser/resetPassword\", this.pwdUpdate, {\n          headers: {\n            \"content-type\": \"application/json\",\n            Authorization: \"brearer \" + localStorage.token\n          }\n        })\n        .then(res => {\n          this.dialogReset = false;\n          if (res.data.Result) {\n            swal({\n              title: \"Đổi thành công\",\n              type: \"success\",\n              showConfirmButton: false,\n              timer: 1000\n            }).then(() => {\n              this.loadingReset = false;\n            });\n          } else {\n            swal({\n              title: \"Lỗi \" + res.data.Code,\n              text: res.data.Msg,\n              type: \"error\",\n              showConfirmButton: false,\n              timer: 1000\n            }).then(() => {\n              this.loadingReset = false;\n            });\n          }\n        })\n        .catch(err => {\n          console.log(\"err\", err);\n          this.loadingReset = false;\n        });\n    },\n    onSetPermisson() {\n      this.loadingPermisson = true;\n      var listPage = [];\n      this.permissonUpdate.listPage.forEach(el => {\n        var d = this.listPage.filter(v => v.screen == el)[0];\n        listPage.push(d);\n      });\n      var submitModel = {\n        userid: this.permissonUpdate.uid,\n        listPage: listPage\n      };\n      axios\n        .post(this.baseApi + \"api/adminuser/setPermisson\", submitModel, {\n          headers: {\n            \"content-type\": \"application/json\",\n            Authorization: \"brearer \" + localStorage.token\n          }\n        })\n        .then(res => {\n          this.dialogPermisson = false;\n          if (res.data.Result) {\n            swal({\n              title: \"Lưu thành công\",\n              type: \"success\",\n              showConfirmButton: false,\n              timer: 1000\n            });\n          } else {\n            swal({\n              title: \"Lỗi \" + res.data.Code,\n              text: res.data.Msg,\n              type: \"error\",\n              showConfirmButton: false,\n              timer: 1000\n            });\n          }\n          this.loadingPermisson = false;\n        })\n        .catch(err => {\n          this.loadingPermisson = false;\n        });\n    },\n    getPermissons(uid) {\n      this.loadingPermisson = true;\n      // var http = axios.create({\n      //   baseURL: this.baseApi + \"api/adminuser/getPage\",\n      //   headers: {\n      //     \"content-type\": \"application/x-www-form-urlencoded\",\n      //     Authorization: \"brearer \" + localStorage.token\n      //   }\n      // });\n      axios\n        .post(\n          this.baseApi + \"api/adminuser/getPage\",\n          { id: uid },\n          {\n            headers: {\n              \"content-type\": \"application/json\",\n              Authorization: \"brearer \" + localStorage.token\n            }\n          }\n        )\n        .then(res => {\n          this.listPage = res.data.data;\n          this.permissonUpdate.uid = uid;\n          this.permissonUpdate.listPage = [];\n          res.data.data_user.forEach(el => {\n            this.permissonUpdate.listPage.push(el.screen);\n          });\n          this.loadingPermisson = false;\n        })\n        .catch(err => {\n          console.log(\"err\", err);\n          this.loadingPermisson = false;\n        });\n    },\n    handleAvatarSuccess(res, file) {\n      console.log(res);\n      this.imageUrl = URL.createObjectURL(file.raw);\n    },\n    beforeAvatarUpload(file) {\n      const isJPG = file.type === \"image/jpeg\";\n      const isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isJPG) {\n        this.$message.error(\"Avatar picture must be JPG format!\");\n      }\n      if (!isLt2M) {\n        this.$message.error(\"Avatar picture size can not exceed 2MB!\");\n      }\n      return isJPG && isLt2M;\n    },\n    upload(file) {\n      this.loadingEdit = true;\n      const formData = new FormData();\n      formData.append(\"file\", file[0]);\n      formData.append(\"upload_preset\", this.cloudinary.uploadPreset);\n      formData.append(\"tags\", \"gs-vue,gs-vue-uploaded\");\n      for (var pair of formData.entries()) {\n        console.log(pair[0] + \", \" + pair[1]);\n      }\n      axios.post(this.clUrl, formData).then(res => {\n        this.userSelect.urlImg = res.data.secure_url;\n        this.loadingEdit = false;\n      });\n    }\n  },\n  mounted() {\n    this.getUser();\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.section {\n  padding: 0;\n}\n\n.profile-tabs /deep/ {\n  .md-card-tabs .md-list {\n    justify-content: center;\n  }\n\n  [class*=\"tab-pane-\"] {\n    margin-top: 3.213rem;\n    padding-bottom: 50px;\n\n    img {\n      margin-bottom: 2.142rem;\n    }\n  }\n}\n</style>\n"],"sourceRoot":"src\\views"}]}