{"remainingRequest":"D:\\My Project\\web-19feb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\My Project\\web-19feb\\src\\views\\facebook\\FB_Leech.vue?vue&type=style&index=0&id=2be7650d&scoped=true&lang=css&","dependencies":[{"path":"D:\\My Project\\web-19feb\\src\\views\\facebook\\FB_Leech.vue","mtime":1539847871583},{"path":"D:\\My Project\\web-19feb\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"D:\\My Project\\web-19feb\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\My Project\\web-19feb\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\My Project\\web-19feb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1538498346230},{"path":"D:\\My Project\\web-19feb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.title {\n  color: white;\n  text-decoration: underline;\n}\n.v-model {\n  z-index: 0 !important;\n}\n.el-alert__title {\n  font-size: 20px !important;\n}\n",{"version":3,"sources":["FB_Leech.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FB_Leech.vue","sourceRoot":"src\\views\\facebook","sourcesContent":["<template>\n  <div class=\"wrapper\">\n    <parallax class=\"section page-header header-filter\" :style=\"headerStyle\"></parallax>\n    <div class=\"main main-raised\">\n      <div class=\"section profile-content\">\n        <div class=\"container\">\n          <div class=\"md-layout\">\n            <div class=\"md-layout-item md-size-50 mx-auto\">\n              <div class=\"profile\">\n                <div class=\"name\">\n                  <h3 class=\"title\">LEECH BÀI VIẾT CỦA FACEBOOK</h3>\n                 </div>\n              </div>\n            </div>\n          </div>\n          <div class=\"profile-tabs\">\n              <md-field class=\"md-form-group\">\n                <i class=\"fas fa-credit-card\"></i>\n                <md-input :disable=\"loading\" v-model=\"code\" placeholder=\"Link bài viết\" v-bind:disabled=\"loading\"></md-input>\n              </md-field>\n              <md-button v-loading=\"loading\" \n                class=\"md-info\" @click=\"onGet\" style=\"width: 100%;\"> <i class=\"material-icons\">thumb_up_alt</i> Lấy\n                </md-button>\n                <el-alert\n                  title=\"success alert\"\n                  type=\"success\"\n                  show-icon>\n                </el-alert>\n              <br>\n              <br>\n              <tree-view :data=\"fbUser\" :options=\"{maxDepth: 4}\" @change-data=\"onChangeData\"></tree-view>\n              <br>\n              <br>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<style scoped>\n.title {\n  color: white;\n  text-decoration: underline;\n}\n.v-model {\n  z-index: 0 !important;\n}\n.el-alert__title {\n  font-size: 20px !important;\n}\n</style>\n\n<script>\nimport { Modal } from \"@/components\";\n// import Loading from \"../layout/Loading.vue\";\nimport axios from \"axios\";\nimport swal from \"sweetalert2\";\nexport default {\n  components: {\n    Modal\n  },\n  bodyClass: \"profile-page\",\n  data() {\n    return {\n      loading: false,\n      code: \"\",\n      fbUser: {\n        uid: \"\",\n        username: \"\",\n        name: \"\",\n        postId: \"\",\n        type: \"\"\n      }\n    };\n  },\n  props: {\n    header: {\n      type: String,\n      default: require(\"@/assets/img/city-profile.jpg\")\n    },\n    img: {\n      type: String,\n      default: require(\"@/assets/img/faces/christian.jpg\")\n    }\n  },\n  computed: {\n    headerStyle() {\n      return {\n        backgroundImage: `url(${this.header})`\n      };\n    },\n    postID() {\n      var postid = \"\";\n      var link = this.code;\n      var kiemtra = link.match(/[^](fbid=[0-9]{9})\\d+/);\n      if (kiemtra !== null) {\n        var a = kiemtra[0].replace(\"?fbid=\", \"\");\n        var postid = a.replace(\"_fbid=\", \"\");\n      } else {\n        var n = link.match(/[^\\/|\\.!=][0-9]{7,}(?!.*[0-9]{7,})\\d+/);\n        console.log(n);\n        if (n !== null) postid = n[0];\n      }\n      this.fbUser.postId = postid;\n    }\n  },\n  methods: {\n    onGet() {\n      this.loading = true;\n      this.fbId(() => {\n        this.loading = false;\n      });\n    },\n    onChangeData: function(data) {\n      console.log(JSON.stringify(data));\n    },\n    async getUIDfromUsername(username) {\n      var url =\n        `https://graph.facebook.com/fql?q=SELECT+uid,name,username+FROM+user+WHERE+username+=+'${username}'+&access_token=` +\n        this.accessToken;\n\n      await axios\n        .get(url)\n        .then(ok => {\n          // console.log(ok.data.data[0]);\n          if (ok.data.data.length != 0) {\n            this.fbUser = ok.data.data[0];\n          } else {\n            axios\n              .get(\n                `https://graph.facebook.com/v2.7/${name}?fields=id,name%20&access_token=` +\n                  this.accessToken\n              )\n              .then(ok => {\n                (this.fbUser.username = name),\n                  (this.fbUser.uid = ok.data.data.id);\n                this.fbUser.name = ok.data.data.name;\n              })\n              .catch(e => {\n                console.log(e);\n                var m = {\n                  uid: \"\",\n                  name: \"\",\n                  username: \"\"\n                };\n                this.fbUser = m;\n              });\n          }\n        })\n        .catch(e => {\n          console.log(e);\n          var m = {\n            uid: \"\",\n            name: \"\",\n            username: \"\"\n          };\n          this.fbUser = m;\n        });\n    },\n    async fbId(callback) {\n      var s = this.code.split(\"fbid=\");\n      if (s && s.length > 1) {\n        this.fbUser.type = \"nousername\";\n        var uId = s[1].split(\"&\")[0].toString();\n        var pId = \"\";\n        var d = s[1].split(\"&set=a.\");\n        var d2 = s[1].split(\"&id=\")[1];\n        if (d && d.length > 1) {\n          pId = d[1].split(\"&\")[0];\n        } else {\n          pId = d2;\n        }\n        console.log(`https://fb.com/${uId}`);\n      } else {\n        this.code[this.code.length - 1] == \"/\" &&\n          (this.code = this.code.substr(0, this.code.length - 2));\n        var uId = this.code.split(\"https://\")[1].split(\"/\")[1];\n        var pId = this.code.split(\"/\")[this.code.split(\"/\").length - 1];\n        var url = `https://graph.facebook.com/fql?q=SELECT+uid,name,username+FROM+user+WHERE+username+=+'${uId}'+&access_token=${\n          this.accessToken\n        }`;\n        await this.getUIDfromUsername(uId);\n        this.fbUser.postId = pId;\n        this.fbUser.type = \"username\";\n        console.log(`https://fb.com/${this.fbUser.uid}_${pId}`);\n      }\n      callback && callback();\n    }\n  },\n  mounted() {\n    this.loading = false;\n    this.code = \"https://www.facebook.com/trungpro2320/posts/2677273278965568\";\n  }\n};\n</script>\n\n<style lang=\"scss\">\n.section {\n  padding: 0;\n}\n.circular {\n  width: 30px !important;\n}\n\n.profile-tabs /deep/ {\n  .md-card-tabs .md-list {\n    justify-content: center;\n  }\n\n  [class*=\"tab-pane-\"] {\n    margin-top: 3.213rem;\n    padding-bottom: 50px;\n\n    img {\n      margin-bottom: 2.142rem;\n    }\n  }\n}\n</style>\n"]}]}